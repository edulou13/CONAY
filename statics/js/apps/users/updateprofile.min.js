/*!
* auhtor: Luis Eduardo Miranda Barja
* (C) 2015 - mbarjaedu13@gmail.com
*/
$(function(){$(".user-profile").addClass("active"),$(".back").on({click:function(t){t.preventDefault(),location.href="/"}});var t=$("input[name=ci]").val(),o=$("#cellphone").val(),n=$("input[name=login]").val();$("input[name=ci]").on({keyup:function(o){o.preventDefault();var n=$(this),r=$(this).val(),a=$(this).data("pattern");r.match(a)&&t!=r&&$.post("/personas/v_ci",data={_xsrf:getCookie("_xsrf"),ci:r},function(o){o&&(swal({title:"Error",text:r+", está registrado con otra persona!",type:"error",confirmButtonText:"Continuar",confirmButtonClass:"btn-primary"}),n.val(t))})}}),$("#cellphone").on({keyup:function(t){t.preventDefault();var n=$(this),r=$(this).val(),a=$(this).data("pattern");r.match(a)&&o!=r&&$.post("/personas/v_userstelf",data={_xsrf:getCookie("_xsrf"),telf:r},function(t){t&&(swal({title:"Error",text:r+", está registrado con otra persona!",type:"error",confirmButtonText:"Continuar",confirmButtonClass:"btn-primary"}),n.val(o))})}}),$("input[name=login]").on({blur:function(t){t.preventDefault();var o=($(this),$(this).val()),r=$(this).data("pattern");o.match(r)&&n!=o&&$.post("/usuarios/v_login",data={_xsrf:getCookie("_xsrf"),login:o},function(t){t&&swal({title:"Error",text:o+", está registrado con otro usuario!",type:"error",confirmButtonText:"Continuar",confirmButtonClass:"btn-primary"})})}}),$("form").on({submit:function(t){t.preventDefault(),t.stopPropagation();var o=$(this).form2Dict(),n=$("button[type=submit]");$.post("/usuarios/profile",data=o,function(t){t?location.href="/":n.enable()})}})});