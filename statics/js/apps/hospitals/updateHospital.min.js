/*!
* auhtor: Luis Eduardo Miranda Barja
* (C) 2015 - mbarjaedu13@gmail.com
*/
$(function(){$(".manager-menu, .health-sub").addClass("active");for(var e=$(".key").data("key"),t=$(".breadcrumb").data("key"),n=["Puesto de Salud","Centro de Salud","1er. Nivel","2do. Nivel","3er. Nivel"],o=[],i=JSON.stringify($(".key").data("prest")),a=function(e){return'<div class="input-group"><span class="input-group-addon"><input type="checkbox" name="id_com" value="'+e.id+'"></span><label class="form-control input-sm">'+e.nombre+"</label></div>"},s=function(e){return'<div class="input-group"><span class="input-group-addon"><input type="checkbox" name="id_pst" value="'+e.id_pst+'"></span><label class="form-control input-sm">'+e.nombre+"</label></div>"},r=0;r<n.length;r++)n[r]==t.tipo?o.push('<option value="'+n[r]+'" selected>'+n[r]+"</option>"):o.push('<option value="'+n[r]+'">'+n[r]+"</option>");$("#inputTipo").html(o.join(""));for(var r=0;r<e.length;r++)t.com!=e[r].id&&$("#comunidades").append(a(e[r]));$.post("/prestaciones/disponibles",data={_xsrf:getCookie("_xsrf"),prestaciones:i},function(e){if("array"==$.type(e))for(var t=0;t<e.length;t++)$("#prestaciones").append(s(e[t]))}),$(".networks").on({click:function(e){e.preventDefault(),location.href="/redes_salud/gestion"}}),$(".net").on({click:function(e){e.preventDefault(),location.href="/municipios/gestion?id_red="+t.red}}),$(".mup").on({click:function(e){e.preventDefault(),location.href="/comunidades/gestion?id_mup="+t.mup}}),$(".back").on({click:function(e){e.preventDefault(),location.href="/centros_salud/gestion?id_com="+t.com}}),$("form").on({submit:function(e){e.preventDefault(),o_form=$(this),btn_submit=$("button[type=submit]"),btn_submit.disable(),$.post("/centros_salud/modificar_establecimiento",data=o_form.form2Dict(!0),function(e){e?location.href="/centros_salud/gestion?id_com={0}".format(t.com):btn_submit.enable()})}})});